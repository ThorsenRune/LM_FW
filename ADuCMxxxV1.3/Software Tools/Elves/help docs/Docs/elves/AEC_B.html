<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">

<HTML>
<HEAD>
	<TITLE>ArmElvesRulesBody</TITLE>
	<LINK REL="STYLESHEET" HREF="../AIDEB.css" TYPE="text/css">
</HEAD>
<BODY>
<TABLE BORDER=0 Cellpading=2 WIDTH="100%">
<TR>
	<TD CLASS="S"><B><FONT SIZE="5">
		<A HREF="AE_P.html" TARGET="_parent">Elves Code Rules
		</A></FONT SIZE></B>
	<TD  CLASS="X"><A HREF="AE_P.html" TARGET="_parent">
		<img SRC="../Context_I.png" BORDER=0>Context</A>
</TR>
</TABLE>
<P>

In order for Elves to function the library source code must follow certain rules 
as described below. As will be seen these rules do not change the code generated 
and can easily be followed by the user. Thus the system is useful for libraries 
supplied by vendors as well as those generated by users.<P>

<H3>Files.</H3>

The library source code can be in any folder of the user's system.</B>. 

As Elves will list the functions of the selected library, related functions 
should be combined in one library. 
For the peripheral libraries this is achieved by having a separate library for 
each peripheral.
In these libraries every function name starts with typically 3 digits 
indicating the peripheral (e.g. Dac) followed by typically 3 digits indicating 
the specific function (e.g. Out for Output). The Library name also contains the 
digits for the peripheral plus Lib.c or Lib.h as appropriate. e.g. DacOut( ) in 
DacLib.c and DacLib.h<P>

<H3>Function Delimiters.</H3>

Within the libraries each function has to have a specific format. 
The function must start with a comment block starting with /** and terminated
with **/ and should be Doxygen compliant.<BR>
@brief gives the function prototype and a short description.<BR>
@param gives each parameter name followed by a list of parameter values
according to rules detailed below.  Each entry in the list should be described
under Parameter Details below.<P>

@return should describe the return value.<P>

Other Doxygen lines can be added as desired.<P>

The comment block must be followed by the function definition.  This function
definition must exactly match the function declaration in the .h file<BR> 
This is follwed by the function body.  The next /** or the end of file is 
assumed to be the end of the function.<P>

<H3>Parameter Details.</H3>

Below are typical lines.<BR>
<PRE>    @param iValue :{}
    @param iAddr :{0-0xf7ff}
    @param iChan :{0,1,2,3}
    @param iFormat :{URT_68|URT_78|URT_STP2|URT_PE|URT_PODD|URT_PS|URT_BR}</PRE>

The lines start with @param followed by the parameter name followed by the 
parameter list in braces.<BR>
If the list is empty the user must type in a value for this parameter.<BR>
If the braces are filled by two values separated by " - " the 
Elves will give a warning if a value outside this range was entered.<BR>
If the braces are filled with a comma separated list of values then the 
elves will present this list to the user to select one item from the list.<BR>
If the braces are filled with a list with " | " as separator the Elves will put
this list in a multiselection list box for the user to select multiple items. 
This is mostly used to set multiple bits of a word.<P>

For these lists to be meaningful, the list items must be defined in the 
matching header file (e.g. DioLib.h).<P>

The <A HREF="AEO_B.html">Elves Dialog</A> description shows a typical example.<BR> 

The exact details will vary depending on the number and types of parameters 
involved.  Note that a maximum of 4 parameters can be used.<P>

<H3>Helpers.</H3>

If @note is used and includes an executable file name e.g. M360T.exe then this 
name will be displayed in the Helper button.  If this button is clicked the 
application will be launched.  If no @note with an executable name is contained 
in the function header then the Helper button will be hidden.<P>

			<HR WIDTH="80%">
</BODY>
</HTML>


